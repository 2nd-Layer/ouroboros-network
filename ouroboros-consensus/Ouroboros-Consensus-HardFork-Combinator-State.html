<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Ouroboros.Consensus.HardFork.Combinator.State</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Ouroboros.Consensus.HardFork.Combinator.State.html">Source</a></li><li><a href="&quot;../index.html&quot;">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ouroboros-consensus-0.1.0.0: Consensus layer for the Ouroboros blockchain protocol</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Ouroboros.Consensus.HardFork.Combinator.State</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Serialisation support</a></li><li><a href="#g:2">EpochInfo</a></li><li><a href="#g:3">Ledger specific functionality</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Intended for qualified import</p><pre>import Ouroboros.Consensus.HardFork.Combinator.State (HardForkState_(..))
import qualified Ouroboros.Consensus.HardFork.Combinator.State as State</pre></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short">module <a href="Ouroboros-Consensus-HardFork-Combinator-State-Infra.html">Ouroboros.Consensus.HardFork.Combinator.State.Infra</a></li><li class="src short"><a href="#v:recover">recover</a> &#8759; &#8704; g f xs. <a href="Ouroboros-Consensus-HardFork-Combinator-Abstract.html#t:CanHardFork" title="Ouroboros.Consensus.HardFork.Combinator.Abstract">CanHardFork</a> xs &#8658; <a href="Ouroboros-Consensus-BlockchainTime-WallClock-Types.html#t:SystemStart" title="Ouroboros.Consensus.BlockchainTime.WallClock.Types">SystemStart</a> &#8594; <a href="Ouroboros-Consensus-HardFork-Combinator-Util-Telescope.html#t:Telescope" title="Ouroboros.Consensus.HardFork.Combinator.Util.Telescope">Telescope</a> (<a href="Ouroboros-Consensus-HardFork-Combinator-State-Infra.html#t:Past" title="Ouroboros.Consensus.HardFork.Combinator.State.Infra">Past</a> g) f xs &#8594; <a href="Ouroboros-Consensus-HardFork-Combinator-State-Infra.html#t:HardForkState_" title="Ouroboros.Consensus.HardFork.Combinator.State.Infra">HardForkState_</a> g f xs</li><li class="src short"><a href="#v:reconstructSummaryLedger">reconstructSummaryLedger</a> &#8759; <a href="Ouroboros-Consensus-HardFork-Combinator-Abstract.html#t:CanHardFork" title="Ouroboros.Consensus.HardFork.Combinator.Abstract">CanHardFork</a> xs &#8658; <a href="Ouroboros-Consensus-HardFork-Combinator-Basics.html#t:HardForkLedgerConfig" title="Ouroboros.Consensus.HardFork.Combinator.Basics">HardForkLedgerConfig</a> xs &#8594; <a href="Ouroboros-Consensus-HardFork-Combinator-State-Infra.html#t:HardForkState" title="Ouroboros.Consensus.HardFork.Combinator.State.Infra">HardForkState</a> <a href="Ouroboros-Consensus-Ledger-Abstract.html#t:LedgerState" title="Ouroboros.Consensus.Ledger.Abstract">LedgerState</a> xs &#8594; <a href="Ouroboros-Consensus-HardFork-History.html#t:Summary" title="Ouroboros.Consensus.HardFork.History">Summary</a> xs</li><li class="src short"><a href="#v:epochInfoLedger">epochInfoLedger</a> &#8759; <a href="Ouroboros-Consensus-HardFork-Combinator-Abstract.html#t:CanHardFork" title="Ouroboros.Consensus.HardFork.Combinator.Abstract">CanHardFork</a> xs &#8658; <a href="Ouroboros-Consensus-HardFork-Combinator-Basics.html#t:HardForkLedgerConfig" title="Ouroboros.Consensus.HardFork.Combinator.Basics">HardForkLedgerConfig</a> xs &#8594; <a href="Ouroboros-Consensus-HardFork-Combinator-State-Infra.html#t:HardForkState" title="Ouroboros.Consensus.HardFork.Combinator.State.Infra">HardForkState</a> <a href="Ouroboros-Consensus-Ledger-Abstract.html#t:LedgerState" title="Ouroboros.Consensus.Ledger.Abstract">LedgerState</a> xs &#8594; <a href="Ouroboros-Consensus-HardFork-Combinator-PartialConfig.html#t:EpochInfo" title="Ouroboros.Consensus.HardFork.Combinator.PartialConfig">EpochInfo</a> <a href="Ouroboros-Consensus-HardFork-Combinator-PartialConfig.html#t:Identity" title="Ouroboros.Consensus.HardFork.Combinator.PartialConfig">Identity</a></li><li class="src short"><a href="#v:epochInfoLedgerView">epochInfoLedgerView</a> &#8759; <a href="Ouroboros-Consensus-HardFork-Combinator-Abstract.html#t:CanHardFork" title="Ouroboros.Consensus.HardFork.Combinator.Abstract">CanHardFork</a> xs &#8658; <a href="Ouroboros-Consensus-HardFork-History.html#t:Shape" title="Ouroboros.Consensus.HardFork.History">Shape</a> xs &#8594; <a href="Ouroboros-Consensus-HardFork-Combinator-Protocol-LedgerView.html#t:HardForkLedgerView" title="Ouroboros.Consensus.HardFork.Combinator.Protocol.LedgerView">HardForkLedgerView</a> xs &#8594; <a href="Ouroboros-Consensus-HardFork-Combinator-PartialConfig.html#t:EpochInfo" title="Ouroboros.Consensus.HardFork.Combinator.PartialConfig">EpochInfo</a> <a href="Ouroboros-Consensus-HardFork-Combinator-PartialConfig.html#t:Identity" title="Ouroboros.Consensus.HardFork.Combinator.PartialConfig">Identity</a></li><li class="src short"><a href="#v:extendToSlot">extendToSlot</a> &#8759; &#8704; xs. <a href="Ouroboros-Consensus-HardFork-Combinator-Abstract.html#t:CanHardFork" title="Ouroboros.Consensus.HardFork.Combinator.Abstract">CanHardFork</a> xs &#8658; <a href="Ouroboros-Consensus-HardFork-Combinator-Basics.html#t:HardForkLedgerConfig" title="Ouroboros.Consensus.HardFork.Combinator.Basics">HardForkLedgerConfig</a> xs &#8594; <a href="Ouroboros-Consensus-Storage-ImmutableDB-Types.html#t:SlotNo" title="Ouroboros.Consensus.Storage.ImmutableDB.Types">SlotNo</a> &#8594; <a href="Ouroboros-Consensus-HardFork-Combinator-State-Infra.html#t:HardForkState" title="Ouroboros.Consensus.HardFork.Combinator.State.Infra">HardForkState</a> <a href="Ouroboros-Consensus-Ledger-Abstract.html#t:LedgerState" title="Ouroboros.Consensus.Ledger.Abstract">LedgerState</a> xs &#8594; <a href="Ouroboros-Consensus-HardFork-Combinator-State-Infra.html#t:HardForkState" title="Ouroboros.Consensus.HardFork.Combinator.State.Infra">HardForkState</a> <a href="Ouroboros-Consensus-Ledger-Abstract.html#t:LedgerState" title="Ouroboros.Consensus.Ledger.Abstract">LedgerState</a> xs</li><li class="src short"><a href="#v:transitions">transitions</a> &#8759; &#8704; g xs. <a href="Ouroboros-Consensus-HardFork-Combinator-Abstract.html#t:CanHardFork" title="Ouroboros.Consensus.HardFork.Combinator.Abstract">CanHardFork</a> xs &#8658; <a href="Ouroboros-Consensus-HardFork-Combinator-Basics.html#t:HardForkLedgerConfig" title="Ouroboros.Consensus.HardFork.Combinator.Basics">HardForkLedgerConfig</a> xs &#8594; <a href="Ouroboros-Consensus-HardFork-Combinator-State-Infra.html#t:HardForkState_" title="Ouroboros.Consensus.HardFork.Combinator.State.Infra">HardForkState_</a> g <a href="Ouroboros-Consensus-Ledger-Abstract.html#t:LedgerState" title="Ouroboros.Consensus.Ledger.Abstract">LedgerState</a> xs &#8594; <a href="Ouroboros-Consensus-HardFork-History.html#t:Transitions" title="Ouroboros.Consensus.HardFork.History">Transitions</a> xs</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src">module <a href="Ouroboros-Consensus-HardFork-Combinator-State-Infra.html">Ouroboros.Consensus.HardFork.Combinator.State.Infra</a></p></div><a href="#g:1" id="g:1"><h1>Serialisation support</h1></a><div class="top"><p class="src"><a id="v:recover" class="def">recover</a> &#8759; &#8704; g f xs. <a href="Ouroboros-Consensus-HardFork-Combinator-Abstract.html#t:CanHardFork" title="Ouroboros.Consensus.HardFork.Combinator.Abstract">CanHardFork</a> xs &#8658; <a href="Ouroboros-Consensus-BlockchainTime-WallClock-Types.html#t:SystemStart" title="Ouroboros.Consensus.BlockchainTime.WallClock.Types">SystemStart</a> &#8594; <a href="Ouroboros-Consensus-HardFork-Combinator-Util-Telescope.html#t:Telescope" title="Ouroboros.Consensus.HardFork.Combinator.Util.Telescope">Telescope</a> (<a href="Ouroboros-Consensus-HardFork-Combinator-State-Infra.html#t:Past" title="Ouroboros.Consensus.HardFork.Combinator.State.Infra">Past</a> g) f xs &#8594; <a href="Ouroboros-Consensus-HardFork-Combinator-State-Infra.html#t:HardForkState_" title="Ouroboros.Consensus.HardFork.Combinator.State.Infra">HardForkState_</a> g f xs <a href="src/Ouroboros.Consensus.HardFork.Combinator.State.html#recover" class="link">Source</a> <a href="#v:recover" class="selflink">#</a></p><div class="doc"><p>Recover <code><a href="Ouroboros-Consensus-HardFork-Combinator-State-Infra.html#t:HardForkState_" title="Ouroboros.Consensus.HardFork.Combinator.State.Infra">HardForkState_</a></code> from partial information</p><p>The primary goal of this is to make sure that for the <em>current</em> state we
 really only need to store the underlying <code>f</code>. It is not strictly essential
 that this is possible but it helps with the unary hardfork case, and it may
 in general help with binary compatibility.</p></div></div><a href="#g:2" id="g:2"><h1>EpochInfo</h1></a><div class="top"><p class="src"><a id="v:reconstructSummaryLedger" class="def">reconstructSummaryLedger</a> &#8759; <a href="Ouroboros-Consensus-HardFork-Combinator-Abstract.html#t:CanHardFork" title="Ouroboros.Consensus.HardFork.Combinator.Abstract">CanHardFork</a> xs &#8658; <a href="Ouroboros-Consensus-HardFork-Combinator-Basics.html#t:HardForkLedgerConfig" title="Ouroboros.Consensus.HardFork.Combinator.Basics">HardForkLedgerConfig</a> xs &#8594; <a href="Ouroboros-Consensus-HardFork-Combinator-State-Infra.html#t:HardForkState" title="Ouroboros.Consensus.HardFork.Combinator.State.Infra">HardForkState</a> <a href="Ouroboros-Consensus-Ledger-Abstract.html#t:LedgerState" title="Ouroboros.Consensus.Ledger.Abstract">LedgerState</a> xs &#8594; <a href="Ouroboros-Consensus-HardFork-History.html#t:Summary" title="Ouroboros.Consensus.HardFork.History">Summary</a> xs <a href="src/Ouroboros.Consensus.HardFork.Combinator.State.html#reconstructSummaryLedger" class="link">Source</a> <a href="#v:reconstructSummaryLedger" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:epochInfoLedger" class="def">epochInfoLedger</a> &#8759; <a href="Ouroboros-Consensus-HardFork-Combinator-Abstract.html#t:CanHardFork" title="Ouroboros.Consensus.HardFork.Combinator.Abstract">CanHardFork</a> xs &#8658; <a href="Ouroboros-Consensus-HardFork-Combinator-Basics.html#t:HardForkLedgerConfig" title="Ouroboros.Consensus.HardFork.Combinator.Basics">HardForkLedgerConfig</a> xs &#8594; <a href="Ouroboros-Consensus-HardFork-Combinator-State-Infra.html#t:HardForkState" title="Ouroboros.Consensus.HardFork.Combinator.State.Infra">HardForkState</a> <a href="Ouroboros-Consensus-Ledger-Abstract.html#t:LedgerState" title="Ouroboros.Consensus.Ledger.Abstract">LedgerState</a> xs &#8594; <a href="Ouroboros-Consensus-HardFork-Combinator-PartialConfig.html#t:EpochInfo" title="Ouroboros.Consensus.HardFork.Combinator.PartialConfig">EpochInfo</a> <a href="Ouroboros-Consensus-HardFork-Combinator-PartialConfig.html#t:Identity" title="Ouroboros.Consensus.HardFork.Combinator.PartialConfig">Identity</a> <a href="src/Ouroboros.Consensus.HardFork.Combinator.State.html#epochInfoLedger" class="link">Source</a> <a href="#v:epochInfoLedger" class="selflink">#</a></p><div class="doc"><p>Construct <code><a href="Ouroboros-Consensus-HardFork-Combinator-PartialConfig.html#t:EpochInfo" title="Ouroboros.Consensus.HardFork.Combinator.PartialConfig">EpochInfo</a></code> from the ledger state</p><p>NOTE: The resulting <code><a href="Ouroboros-Consensus-HardFork-Combinator-PartialConfig.html#t:EpochInfo" title="Ouroboros.Consensus.HardFork.Combinator.PartialConfig">EpochInfo</a></code> is a snapshot only, with a limited range.
 It should not be stored.</p></div></div><div class="top"><p class="src"><a id="v:epochInfoLedgerView" class="def">epochInfoLedgerView</a> &#8759; <a href="Ouroboros-Consensus-HardFork-Combinator-Abstract.html#t:CanHardFork" title="Ouroboros.Consensus.HardFork.Combinator.Abstract">CanHardFork</a> xs &#8658; <a href="Ouroboros-Consensus-HardFork-History.html#t:Shape" title="Ouroboros.Consensus.HardFork.History">Shape</a> xs &#8594; <a href="Ouroboros-Consensus-HardFork-Combinator-Protocol-LedgerView.html#t:HardForkLedgerView" title="Ouroboros.Consensus.HardFork.Combinator.Protocol.LedgerView">HardForkLedgerView</a> xs &#8594; <a href="Ouroboros-Consensus-HardFork-Combinator-PartialConfig.html#t:EpochInfo" title="Ouroboros.Consensus.HardFork.Combinator.PartialConfig">EpochInfo</a> <a href="Ouroboros-Consensus-HardFork-Combinator-PartialConfig.html#t:Identity" title="Ouroboros.Consensus.HardFork.Combinator.PartialConfig">Identity</a> <a href="src/Ouroboros.Consensus.HardFork.Combinator.State.html#epochInfoLedgerView" class="link">Source</a> <a href="#v:epochInfoLedgerView" class="selflink">#</a></p><div class="doc"><p>Construct <code><a href="Ouroboros-Consensus-HardFork-Combinator-PartialConfig.html#t:EpochInfo" title="Ouroboros.Consensus.HardFork.Combinator.PartialConfig">EpochInfo</a></code> from a ledger view</p><p>The same comments apply as for <code><a href="Ouroboros-Consensus-HardFork-Combinator-State.html#v:epochInfoLedger" title="Ouroboros.Consensus.HardFork.Combinator.State">epochInfoLedger</a></code>, except more so: the range
 of the <code><a href="Ouroboros-Consensus-HardFork-Combinator-PartialConfig.html#t:EpochInfo" title="Ouroboros.Consensus.HardFork.Combinator.PartialConfig">EpochInfo</a></code> is determined by the ledger that the view was derived
 from; when the view is a forecast, that range does not extend (obviously).</p></div></div><a href="#g:3" id="g:3"><h1>Ledger specific functionality</h1></a><div class="top"><p class="src"><a id="v:extendToSlot" class="def">extendToSlot</a> &#8759; &#8704; xs. <a href="Ouroboros-Consensus-HardFork-Combinator-Abstract.html#t:CanHardFork" title="Ouroboros.Consensus.HardFork.Combinator.Abstract">CanHardFork</a> xs &#8658; <a href="Ouroboros-Consensus-HardFork-Combinator-Basics.html#t:HardForkLedgerConfig" title="Ouroboros.Consensus.HardFork.Combinator.Basics">HardForkLedgerConfig</a> xs &#8594; <a href="Ouroboros-Consensus-Storage-ImmutableDB-Types.html#t:SlotNo" title="Ouroboros.Consensus.Storage.ImmutableDB.Types">SlotNo</a> &#8594; <a href="Ouroboros-Consensus-HardFork-Combinator-State-Infra.html#t:HardForkState" title="Ouroboros.Consensus.HardFork.Combinator.State.Infra">HardForkState</a> <a href="Ouroboros-Consensus-Ledger-Abstract.html#t:LedgerState" title="Ouroboros.Consensus.Ledger.Abstract">LedgerState</a> xs &#8594; <a href="Ouroboros-Consensus-HardFork-Combinator-State-Infra.html#t:HardForkState" title="Ouroboros.Consensus.HardFork.Combinator.State.Infra">HardForkState</a> <a href="Ouroboros-Consensus-Ledger-Abstract.html#t:LedgerState" title="Ouroboros.Consensus.Ledger.Abstract">LedgerState</a> xs <a href="src/Ouroboros.Consensus.HardFork.Combinator.State.html#extendToSlot" class="link">Source</a> <a href="#v:extendToSlot" class="selflink">#</a></p><div class="doc"><p>Extend the telescope until the specified slot is within the era at the tip</p></div></div><div class="top"><p class="src"><a id="v:transitions" class="def">transitions</a> &#8759; &#8704; g xs. <a href="Ouroboros-Consensus-HardFork-Combinator-Abstract.html#t:CanHardFork" title="Ouroboros.Consensus.HardFork.Combinator.Abstract">CanHardFork</a> xs &#8658; <a href="Ouroboros-Consensus-HardFork-Combinator-Basics.html#t:HardForkLedgerConfig" title="Ouroboros.Consensus.HardFork.Combinator.Basics">HardForkLedgerConfig</a> xs &#8594; <a href="Ouroboros-Consensus-HardFork-Combinator-State-Infra.html#t:HardForkState_" title="Ouroboros.Consensus.HardFork.Combinator.State.Infra">HardForkState_</a> g <a href="Ouroboros-Consensus-Ledger-Abstract.html#t:LedgerState" title="Ouroboros.Consensus.Ledger.Abstract">LedgerState</a> xs &#8594; <a href="Ouroboros-Consensus-HardFork-History.html#t:Transitions" title="Ouroboros.Consensus.HardFork.History">Transitions</a> xs <a href="src/Ouroboros.Consensus.HardFork.Combinator.State.html#transitions" class="link">Source</a> <a href="#v:transitions" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>